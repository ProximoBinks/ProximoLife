---
interface Props {
  onSuccess: string;
}

const { onSuccess } = Astro.props;
---

<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white p-8 rounded-lg shadow-xl max-w-md w-full">
    <h2 class="text-2xl font-bold mb-4">Enter Password</h2>
    <p class="text-gray-600 mb-4">This post is password protected. Please enter the password to view the content.</p>
    <input
      type="password"
      id="password-input"
      class="w-full p-2 border border-gray-300 rounded mb-4"
      placeholder="Enter password"
    />
    <div class="flex gap-4">
      <a
        href="/blog"
        class="flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300 transition-colors text-center"
      >
        ‚Üê Back to Blog
      </a>
      <button
        id="submit-password"
        class="flex-1 bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition-colors"
      >
        Submit
      </button>
    </div>
    <p id="error-message" class="text-red-500 mt-2 hidden">Incorrect password</p>
  </div>
</div>

<script>
  const passwordInput = document.getElementById('password-input');
  const submitButton = document.getElementById('submit-password');
  const errorMessage = document.getElementById('error-message');
  const correctPassword = 'elliots#1fan';

  if (submitButton && passwordInput && errorMessage) {
    submitButton.addEventListener('click', () => {
      const enteredPassword = (passwordInput as HTMLInputElement).value;
      if (enteredPassword === correctPassword) {
        // Store in localStorage
        localStorage.setItem('blogPassword', enteredPassword);
        // Hide the overlay
        const overlay = document.querySelector('.fixed');
        if (overlay) {
          (overlay as HTMLElement).style.display = 'none';
        }
        // Show the content
        const content = document.querySelector('.post-content');
        if (content) {
          (content as HTMLElement).style.display = 'block';
        }
      } else {
        errorMessage.classList.remove('hidden');
      }
    });

    // Allow Enter key to submit
    passwordInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && submitButton) {
        submitButton.click();
      }
    });
  }
</script> 